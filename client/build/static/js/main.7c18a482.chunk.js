(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,a){e.exports=a(72)},53:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),i=a.n(c),l=a(11),s=(a(53),a(2)),o=a(16),u=a(4),m=a.n(u),p=a(14),f=a(12),d=a(3),h=a.n(d),b=a(13),v=function(e){return{user:e.user}},E=function(e){var t=e.profile;return t?Object(b.a)(t,["given_name"])?t.given_name:Object(b.a)(t,"name"):""},j=function(e){var t=e.handleForm;return r.a.createElement("div",{className:"button-holder"},r.a.createElement("button",{className:"btn btn-white",onClick:t,type:"submit"},"Save"))};var O=Object(l.b)(v)(function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),s=Object(f.a)(l,2),o=s[0],u=s[1],d=Object(n.useState)(""),v=Object(f.a)(d,2),E=v[0],O=v[1],w=function(t){t.preventDefault();var a=e.match.params.id;Object(b.b)(a)?h.a.post("/api/entries/new",{title:o,body:E,email:e.user.profile.email}).then(e.history.push("/entries")):h.a.post("/api/entries/edit",{id:a,title:o,body:E}).then(e.history.push("/entries")),u(""),i(""),O("")};return Object(n.useEffect)(function(){var t=e.match.params.id,a=function(){var e=Object(p.a)(m.a.mark(function e(){var a,n,r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()("/api/entries/".concat(t));case 2:a=e.sent,n=a.data,r=n.title,c=n.body,u(r),O(c);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(b.b)(t)||a()},[e.match.params]),e.user.initialized?(Object(b.b)(e.user.profile)&&e.history.push("/signin"),Object(b.b)(o)?r.a.createElement("div",{className:"composer"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u(c)}},r.a.createElement("input",{style:{paddingTop:"40%"},className:"entry-title center-text",onChange:function(e){i(e.target.value)},value:c,placeholder:"Enter Title Here",autoFocus:!0}),r.a.createElement("input",{type:"submit",hidden:!0})),r.a.createElement(x,null)):r.a.createElement("div",{className:"composer"},r.a.createElement("h2",{onClick:function(){u("")},className:"entry-title"},o),r.a.createElement("div",{className:"form-holder"},r.a.createElement("form",{className:"flex",onSubmit:w},r.a.createElement("textarea",{autoFocus:!0,value:E,onChange:function(e){O(e.target.value)}}),window.innerWidth>=480&&r.a.createElement(j,{handleForm:w}))),r.a.createElement(x,{saveButton:window.innerWidth<480,handleForm:w}))):null});var x=Object(l.b)(v)(function(e){var t=e.user,a=e.saveButton,n=e.handleForm;return r.a.createElement("div",{className:"foot flex"},r.a.createElement("p",null,r.a.createElement(s.b,{to:"/compose"},"Compose")),r.a.createElement("p",null,r.a.createElement(s.b,{to:"/entries"},"Entries")),r.a.createElement("div",{className:"push"},a?r.a.createElement(j,{handleForm:n}):r.a.createElement("p",{className:"username"},E(t))))});var w=Object(l.b)(v)(function(e){var t=e.user,a=Object(n.useState)({entries:[]}),c=Object(f.a)(a,2),i=c[0],l=c[1],o=function(){var e=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()("/api/entries");case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete?")){e.next=4;break}return e.next=3,h.a.delete("/api/entries/".concat(t));case 3:o();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){o()},[]),r.a.createElement("div",{className:"flex vertical full"},r.a.createElement("h2",{className:"title"},"Available Works"),r.a.createElement("div",{className:"poem-box"},r.a.createElement("ul",{className:"poem-list"},i.entries.map(function(e,a){return r.a.createElement("li",{key:"entry-".concat(a),className:"entry-title flex"},r.a.createElement(s.b,{to:"/entries/".concat(e.id)},e.title),Object(b.a)(t,["profile","email"])===e.creator_email&&r.a.createElement("div",{className:"push"},r.a.createElement(s.b,{to:"/compose/".concat(e.id)},r.a.createElement("i",{className:"material-icons"},"edit")),r.a.createElement("i",{className:"material-icons",onClick:function(){u(e.id)}},"delete")))}))),r.a.createElement(x,null))});var y=function(e){var t=e.match,a=Object(n.useState)({}),c=Object(f.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)(function(){!function(){var e=Object(p.a)(m.a.mark(function e(){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.params.id,e.next=3,h()("/api/entries/".concat(a));case 3:n=e.sent,l(n.data);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("div",{className:"flex vertical full"},r.a.createElement("h2",{className:"title"},i.title),r.a.createElement("div",{className:"poem-box"},r.a.createElement("p",{style:{whiteSpace:"pre"}},i.body)),r.a.createElement(x,null))};var N=function(e){e.match;var t=Object(n.useState)({}),a=Object(f.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)(function(){!function(){var e=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()("/api/google/link");case 2:t=e.sent,i(t.data.url);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement("div",{className:"composer"},r.a.createElement("div",{style:{height:"50vh"},className:"flex vertical flex-child"},r.a.createElement("p",{className:"entry-title center-text flex-child"},"Welcome! To write something, please ",r.a.createElement("a",{href:c},"sign in")," with your Google account."),r.a.createElement("p",{className:"entry-title center-text flex-child"},"Or you can just ",r.a.createElement(s.b,{to:"/entries"},"read")," the available works.")),r.a.createElement("div",{className:"foot right-align"},r.a.createElement("p",null,"Created by William Bruntrager")))};var g=function(e){return e.match,r.a.createElement("div",{className:"composer"},r.a.createElement("div",{style:{height:"30vh"},className:"flex vertical flex-child"},r.a.createElement("p",{className:"entry-title center-text flex-child"},r.a.createElement(s.b,{to:"/compose"},"Create")),r.a.createElement("p",{className:"entry-title center-text flex-child"},r.a.createElement(s.b,{to:"/entries"},"Read"))),r.a.createElement("div",{className:"foot right-align"},r.a.createElement("p",null,"Created by William Bruntrager")))},k=a(19),S=Object(k.b)("user/status");var C=Object(l.b)(v,{getStatus:function(){return function(e){return h.a.get("/api/users/status").then(function(t){var a=t.data;return e(S(a))}).catch(function(e){console.log("An error occurred")})}}})(function(e){var t=e.getStatus;return Object(n.useEffect)(function(){t()},[t]),r.a.createElement(s.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{path:"/",exact:!0,component:g}),r.a.createElement(o.a,{path:"/compose/:id?",exact:!0,component:O}),r.a.createElement(o.a,{path:"/signin",exact:!0,component:N}),r.a.createElement(o.a,{path:"/entries",exact:!0,component:w}),r.a.createElement(o.a,{path:"/entries/:id",component:y})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(23),W=a(42),B=Object(k.c)({initialized:!1},Object(F.a)({},S,function(e,t){return Object(W.a)({initialized:!0},t.payload)})),z=Object(k.a)({reducer:{user:B}});i.a.render(r.a.createElement(l.a,{store:z},r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.7c18a482.chunk.js.map